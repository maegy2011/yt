# دليل إصلاح مشاكل YouTube API

## المشكلة: لا يمكن جلب الفيديوهات

### الأسباب الشائعة والحلول

#### 1. مفتاح API غير صالح أو غير موجود
**الأعراض:**
- رسالة "مفتاح API غير صالح"
- خطأ 401/403 من YouTube API

**الحل:**
1. اذهب إلى [Google Cloud Console](https://console.cloud.google.com/)
2. اختر مشروعك أو أنشئ مشروعاً جديداً
3. تأكد من تفعيل **YouTube Data API v3**
4. اذهب إلى **Credentials**
5. أنشئ **API Key** جديد
6. أضف المفتاح في Vercel Environment Variables:
   ```
   NEXT_PUBLIC_YOUTUBE_API_KEY=your_new_api_key_here
   ```
7. أعد نشر المشروع

#### 2. تجاوز الحصة اليومية (Quota Exceeded)
**الأعراض:**
- رسالة "تم تجاوز حصة API اليومية"
- خطأ 403 مع رسالة quotaExceeded

**الحل:**
1. انتظر حتى يتم تجديد الحصة (يتم التجديد يومياً الساعة 12 صباحاً بتوقيت المحيط الهادئ)
2. أو اطلب زيادة الحصة من Google
3. أو استخدم مفتاح API مختلف

#### 3. القناة غير موجودة أو محذوفة
**الأعراض:**
- رسالة "القناة غير موجودة"
- لا يتم جلب أي فيديوهات

**الحل:**
1. تأكد من أن معرف القناة صحيح
2. تحقق من أن القناة لا تزال نشطة على YouTube
3. جرب معرف قناة آخر للاختبار

#### 4. إعدادات الحماية على مفتاح API
**الأعراض:**
- خطأ 403 مع رسالة forbidden
- يعمل المفتاح محلياً لكن لا يعمل على Vercel

**الحل:**
1. اذهب إلى Google Cloud Console
2. ابحث عن مفتاح API
3. تحت "API restrictions"، تأكد من أن:
   - إما أن يكون "Don't restrict key" (موصى به للاختبار)
   - أو أن YouTube Data API v3 مضافة إلى القائمة المسموح بها
4. تحت "Application restrictions"، تأكد من أن:
   - إما أن يكون "None" (موصى به للاختبار)
   - أو أن نطاقات Vercel مضافة

#### 5. مشاكل في الشبكة أو الإعدادات
**الأعراض:**
- أخطاء شبكة غير متوقعة
- مهلة الاتصال انتهت

**الحل:**
1. اختبر اتصال الإنترنت
2. استخدم أداة اختبار YouTube API في التطبيق
3. تحقق من سجلات Vercel للأخطاء

## خطوات الإصلاح السريع

### 1. استخدم أداة الاختبار المدمجة
1. افتح التطبيق
2. اذهب إلى "الإعدادات"
3. انقر على "Test YouTube API"
4. اتبع الاقتراحات التي تظهر

### 2. تحقق من الإعدادات الأساسية
- **مفتاح API**: يجب أن يبدأ بـ "AIza"
- **تفعيل API**: YouTube Data API v3 يجب أن تكون مفعلة
- **النطاقات**: لا توجد قيود على المفتاح (للاختبار)

### 3. جرب قناة اختبار
استخدم معرف قناة معروف مثل:
```
UC_x5XG1OV2P6uZZ5FSM9Ttw (مثل Google Developers)
```

## مثال على مفتاح API صحيح

```
NEXT_PUBLIC_YOUTUBE_API_KEY=AIzaSyB4g_7x5XG1OV2P6uZZ5FSM9Ttw123456
```

## نصائح إضافية

1. **لا تشارك مفتاح API publicly**
2. **استخدم مفاتيح مختلفة للتطوير والإنتاج**
3. **راقب استخدام API في Google Cloud Console**
4. **احتفظ بنسخة احتياطية من المفتاح**

## الحصول على المساعدة

إذا استمرت المشكلة:
1. استخدم أداة الاختبار المدمجة
2. تحقق من سجلات المتصفح (Console)
3. تحقق من سجلات Vercel
4. راجع وثائق [YouTube Data API](https://developers.google.com/youtube/v3)

---

**ملاحظة:** التطبيق الآن يستخدم الطريقة الصحيحة لجلب الفيديوهات باستخدام `search.list` ثم `videos.list` للحصول على التفاصيل الكاملة.