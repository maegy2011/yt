<!DOCTYPE html>
<html>
<head>
    <title>Enhanced Clear Data Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .status { margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .feature-list { list-style: none; padding: 0; }
        .feature-list li { padding: 8px 0; border-bottom: 1px solid #eee; }
        .feature-title { font-weight: bold; color: #333; }
        .feature-desc { font-size: 14px; color: #666; margin-top: 4px; }
    </style>
</head>
<body>
    <h1>üßπ Enhanced Clear Data Features</h1>
    
    <div class="test-section">
        <h2>‚ú® New Enhanced Features</h2>
        <ul class="feature-list">
            <li>
                <div class="feature-title">üìä Data Statistics Overview</div>
                <div class="feature-desc">Shows current data counts before clearing</div>
            </li>
            <li>
                <div class="feature-title">‚òëÔ∏è Selective Clear Options</div>
                <div class="feature-desc">Choose exactly what data to clear</div>
            </li>
            <li>
                <div class="feature-title">üéØ Smart Playback Position Clearing</div>
                <div class="feature-desc">Optionally clear resumable playback data</div>
            </li>
            <li>
                <div class="feature-title">üóÇÔ∏è Advanced Mode Toggle</div>
                <div class="feature-desc">Basic vs advanced clearing options</div>
            </li>
            <li>
                <div class="feature-title">‚ö†Ô∏è Enhanced Warnings</div>
                <div class="feature-desc">Better visual feedback and warnings</div>
            </li>
            <li>
                <div class="feature-title">üì± Local Storage Management</div>
                <div class="feature-desc">Smart clearing of localStorage, cache, and preferences</div>
            </li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üß™ Test Instructions</h2>
        <ol>
            <li><strong>Open YouTube App:</strong> <button onclick="window.open('http://localhost:3000', '_blank')">Launch MyTube</button></li>
            <li><strong>Navigate to Settings:</strong> Click the settings icon in the app</li>
            <li><strong>Try Clear Data:</strong> Click "Clear Data" button</li>
            <li><strong>Enhanced Dialog:</strong> Should see the new enhanced clear data interface</li>
            <li><strong>Test Options:</strong> Try different combinations of data to clear</li>
            <li><strong>Verify Results:</strong> Check that selected data is actually cleared</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>üéØ Key Improvements Made</h2>
        <ul>
            <li><strong>Visual Data Overview:</strong> See exactly what data exists before clearing</li>
            <li><strong>Granular Control:</strong> Clear specific data types only</li>
            <li><strong>Better UX:</strong> Enhanced warnings and confirmations</li>
            <li><strong>Smart Storage:</strong> Intelligent localStorage cleanup</li>
            <li><strong>Playback Support:</strong> Clear resumable playback positions</li>
            <li><strong>Advanced Mode:</strong> Toggle basic/advanced options</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üì± API Endpoints</h2>
        <ul>
            <li><code>GET /api/clear-all-data</code> - Get data statistics</li>
            <li><code>POST /api/clear-all-data</code> - Clear all data</li>
            <li><code>POST /api/clear-selective-data</code> - Clear selected data types</li>
        </ul>
    </div>

    <script>
        function testAPI(endpoint, method = 'GET', data = null) {
            const options = {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                }
            };
            
            if (data && method === 'POST') {
                options.body = JSON.stringify(data);
            }
            
            return fetch(`http://localhost:3000/api/${endpoint}`, options)
                .then(response => response.json())
                .then(result => {
                    console.log(`${endpoint} result:`, result);
                    document.getElementById('api-result').innerHTML = `
                        <h3>‚úÖ ${endpoint} Response:</h3>
                        <pre style="background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto;">
${JSON.stringify(result, null, 2)}
                        </pre>
                    `;
                })
                .catch(error => {
                    console.error(`${endpoint} error:`, error);
                    document.getElementById('api-result').innerHTML = `
                        <h3>‚ùå ${endpoint} Error:</h3>
                        <div style="background: #ffebee; padding: 10px; border-radius: 4px; color: #c53030;">
                            ${error.message}
                        </div>
                    `;
                });
        }

        function testStatistics() {
            testAPI('clear-all-data');
        }

        function testSelectiveClear() {
            const testData = {
                favoriteChannels: true,
                favoriteVideos: false,
                videoNotes: true,
                watchedVideos: false,
                notebooks: false,
                playbackPositions: true
            };
            testAPI('clear-selective-data', 'POST', testData);
        }
    </script>
</body>
</html>